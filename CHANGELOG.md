# Changelog

All notable changes to VAC will be documented in this file.

## [0.4.0] - 2026-02-09

### ‚ú® Features

- Add CLI non-interactive mode with `--scan`, `--dry-run`, `--clean`, `--output`, `--sort`, `--trash` flags

- New `cli.rs` module: clap-based CLI argument parsing with `ScanTarget` enum (Preset / Home / Path)
- Non-interactive scan with synchronous progress, sorting, and terminal or JSON report output
- Support `--dry-run` for simulated deletion statistics without actual cleanup
- Support `--clean` to execute cleanup in non-interactive mode
- Support `--output <FILE>` to export scan results as structured JSON report
- Support `--trash` flag to override config and use system trash instead of permanent deletion

- Add system trash (recycle bin) support via `trash` crate

- New `SafetyConfig` with `move_to_trash` option in `~/.config/vac/config.toml`
- `Cleaner::trash_items()` moves files to system native trash (macOS Finder)
- Directory cleanup preserves directory structure, moves contents to trash
- Confirm popup displays "ÁßªËá≥ÂõûÊî∂Á´ô" hint when trash mode is active

- Add Tab directory completion in path input mode

- `Tab` auto-completes matching subdirectories, `Shift+Tab` cycles backward
- Highlighted candidate list in input popup (max 5 visible items)
- Supports `~` prefix with home directory expansion in completions
- Typing or backspace resets completion state automatically

### üß™ Testing

- Add CLI argument parsing tests (`cli.rs`): scan target parsing, flag combinations, defaults
- Add trash operation tests (`cleaner.rs`): file trash, directory contents trash, nonexistent path handling
- Add safety config tests (`config.rs`): default values, TOML parsing, full config with safety section

### üì¶ Dependencies

- Add `clap` 4.5.57 (derive) for CLI argument parsing
- Add `trash` 5.2.5 for system recycle bin API
- Add `serde_json` 1.0.149 for JSON report serialization

### üìö Documentation

- Document CLI non-interactive mode architecture, state flow, and usage examples
- Document Tab completion behavior and keyboard shortcuts
- Document trash mode configuration and confirm popup changes
- Update architecture state flow diagrams for both TUI and CLI modes

## [0.3.0] - 2026-02-09

### ‚ú® Features

- Cache back navigation and persist sort order

- Restore cached listing and scroll position when navigating back, no rescan needed
- Apply sort order consistently across root view and subdirectories
- Add `config.rs` module: load user config from `~/.config/vac/config.toml`
- Support `extra_targets` for additional scan directories (with `~` expansion)
- Support `default_sort` to set initial sort order via config file

### üß™ Testing

- Add `cargo-nextest` configuration and document the recommended test workflow
- Add unit tests for config parsing, navigation cache, and root sorting

### üìö Documentation

- Document navigation caching and persistent sorting in the architecture guide
- Add config module documentation to architecture and usage docs

## [0.2.0] - 2026-02-07

### ‚ú® Features

- Add search, navigation, parallel scan, and safety enhancements

- Add search/filter mode (/ key) with real-time case-insensitive matching
- Add fast navigation: g/G, Ctrl+d/u, PageDown/PageUp for half-page scroll
- Extend scan targets: CocoaPods, npm, pip, Docker, Cargo caches
- Add rayon parallel directory size calculation for faster scans
- Enhance safety: canonicalize symlinks, forbid home dir deletion, follow_links(false)
- Add scrollable confirm popup with j/k navigation and size-sorted preview
- Add welcome page with keybinding hints for empty state
- Add scrollbar for long lists, enhanced header stats, scan progress display
- Add clean result notification with freed space and item count
- Optimize event polling: 16ms during scan, 100ms idle
- Remove unused dependencies (chrono, serde, serde_json)
- Add git-cliff configuration (cliff.toml) for automated changelog
- Add AGENTS.md repository guidelines
- Add new safety tests for home directory and nonexistent paths


### üìö Documentation

- Add README.md for VAC, detailing features, usage, and safety tips

### ‚öôÔ∏è Miscellaneous

- Add git-cliff generated CHANGELOG.md and update cliff.toml template

## [0.1.0] - 2026-02-03

### üå± Init

- Add initial implementation of VAC, a macOS disk cleanup CLI tool with TUI interface

- Created project structure with Cargo.toml and initial source files.
- Implemented core functionality for scanning and cleaning disk space.
- Added user interface using ratatui for terminal rendering.
- Included configuration files for pre-commit hooks, linting, and formatting.
- Documented architecture and usage instructions in markdown files.
- Introduced .gitignore to exclude target directory from version control.

<!-- generated by git-cliff -->

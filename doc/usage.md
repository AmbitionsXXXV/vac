# VAC 使用说明

## 安装

```bash
# 从源码构建
cargo build --release

# 运行
./target/release/vac
```

## 快捷键

### 扫描操作

| 按键 | 功能 |
|------|------|
| `s` | 扫描预设可清理目录 |
| `S` | 扫描用户主目录 |
| `d` | 输入自定义路径扫描 |

### 浏览与排序

| 按键 | 功能 |
|------|------|
| `↑` / `k` | 向上移动 |
| `↓` / `j` | 向下移动 |
| `Enter` | 进入目录 |
| `Backspace` / `Esc` | 返回上一级（扫描中为取消） |
| `o` | 切换排序方式（名称/大小） |

### 选择与清理

| 按键 | 功能 |
|------|------|
| `Space` | 选择/取消选择当前项 |
| `a` | 全选/取消全选（当前视图） |
| `c` | 执行清理（进入确认模式） |

### 其他

| 按键 | 功能 |
|------|------|
| `?` | 显示/隐藏帮助 |
| `q` | 退出程序 |

## 扫描模式

### 预设可清理目录扫描 (`s`)

VAC 会扫描以下 macOS 常见可清理目录：

1. **系统缓存** - `~/Library/Caches`
2. **日志文件** - `~/Library/Logs`
3. **临时文件** - `/tmp` 和 `/var/tmp`
4. **Xcode 派生数据** - `~/Library/Developer/Xcode/DerivedData`
5. **Homebrew 缓存** - `~/Library/Caches/Homebrew`
6. **下载文件夹** - `~/Downloads`
7. **垃圾桶** - `~/.Trash`

### 主目录扫描 (`S`)

扫描用户主目录下的所有顶层文件和目录，按大小排序显示。

### 自定义路径扫描 (`d`)

按 `d` 键进入路径输入模式，可以输入任意目录路径进行扫描。支持使用 `~` 表示用户主目录。

## 排序功能

在目录浏览时，按 `o` 键可在以下两种排序方式之间切换：

- **按名称排序**：目录优先，同类型按字母顺序排序
- **按大小排序**：按文件/目录大小降序排序

当前排序方式会显示在底部状态栏中。

## 层级浏览

- 根目录扫描完成后，可通过 `Enter` 进入目录逐级浏览
- 列表包含目录和文件，目录会以 `/` 结尾
- 目录大小可能需要一点时间回填，显示为 `…` 表示正在计算

## 安全机制

- 禁止删除系统关键目录
- 仅允许删除用户目录和临时目录下的内容
- 删除前需要二次确认
- 清理目录内容时保留目录本身

## 注意事项

- 清理操作**不可逆**，请在清理前仔细确认
- 建议先备份重要数据
- 部分缓存删除后可能影响应用启动速度（会自动重建）
- Xcode DerivedData 删除后需要重新构建项目

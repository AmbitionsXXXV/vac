# git-cliff ~ configuration file
# https://git-cliff.org/docs/configuration
#
# æœ¬é¡¹ç›® commit message é£æ ¼ï¼š`type: emoji description`
# ä¾‹å¦‚ï¼š`feat: âœ¨ Add search/filter feature`
# åŒæ—¶å…¼å®¹æ ‡å‡† conventional commits æ ¼å¼

[changelog]
# changelog å¤´éƒ¨å†…å®¹
header = """
# Changelog

All notable changes to VAC will be documented in this file.

"""
# æ¯ä¸ªç‰ˆæœ¬çš„ body æ¨¡æ¿
body = """
{%- macro remote_url() -%}
  https://github.com/nicepkg/vac
{%- endmacro -%}

{% if version -%}
## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% else -%}
## [unreleased]
{% endif -%}

{% for group, commits in commits | group_by(attribute="group") %}
### {{ group | striptags | trim | upper_first }}
{% for commit in commits %}
- {% if commit.scope %}*({{ commit.scope }})* {% endif %}\
{% if commit.breaking %}[**breaking**] {% endif %}\
{{ commit.message | upper_first }}\
{% endfor %}
{% endfor %}
"""
# ç§»é™¤ body å‰åç©ºç™½
trim = true
# å³ä½¿æ²¡æœ‰ release ä¹Ÿæ¸²æŸ“
render_always = true
# changelog åº•éƒ¨å†…å®¹
footer = """
<!-- generated by git-cliff -->
"""
# åå¤„ç†å™¨
postprocessors = []

[git]
# è§£æ conventional commits
conventional_commits = true
# ä¸æ’é™¤é conventional çš„ commitï¼ˆé¡¹ç›®ç”¨ `type: emoji` æ ¼å¼ï¼‰
filter_unconventional = false
# ä¸å¼ºåˆ¶è¦æ±‚æ‰€æœ‰ commit éƒ½æ˜¯ conventional
require_conventional = false
# ä¸æŒ‰è¡Œæ‹†åˆ† commit message
split_commits = false
# commit message é¢„å¤„ç†ï¼šå»é™¤ emoji
commit_preprocessors = [
    # å»é™¤ type: åé¢çš„ emojiï¼ˆå¦‚ `feat: âœ¨ Add foo` â†’ `feat: Add foo`ï¼‰
    { pattern = '^(\w+):\s*[^\x00-\x7F]+\s*', replace = "${1}: " },
    # å»é™¤ type(scope): åé¢çš„ emoji
    { pattern = '^(\w+\([^)]*\)):\s*[^\x00-\x7F]+\s*', replace = "${1}: " },
]
# ä¿æŠ¤ breaking change commit ä¸è¢«è¿‡æ»¤
protect_breaking_commits = false
# commit åˆ†ç»„è§£æè§„åˆ™
commit_parsers = [
    { message = "^feat", group = "<!-- 0 -->âœ¨ Features" },
    { message = "^fix", group = "<!-- 1 -->ğŸ› Bug Fixes" },
    { message = "^perf", group = "<!-- 2 -->âš¡ Performance" },
    { message = "^refactor", group = "<!-- 3 -->ğŸšœ Refactor" },
    { message = "^doc", group = "<!-- 4 -->ğŸ“š Documentation" },
    { message = "^style", group = "<!-- 5 -->ğŸ¨ Styling" },
    { message = "^test", group = "<!-- 6 -->ğŸ§ª Testing" },
    { message = "^safety|^security", group = "<!-- 7 -->ğŸ›¡ï¸ Security" },
    { message = "^chore\\(release\\)", skip = true },
    { message = "^chore\\(deps.*\\)", skip = true },
    { message = "^chore|^ci", group = "<!-- 8 -->âš™ï¸ Miscellaneous" },
    { message = "^init", group = "<!-- 9 -->ğŸŒ± Init" },
    { message = "^revert", group = "<!-- 10 -->â—€ï¸ Revert" },
    { message = ".*", group = "<!-- 99 -->ğŸ’¼ Other" },
]
# ä¸æ’é™¤æœªåŒ¹é…çš„ commit
filter_commits = false
# tag åŒ¹é…æ­£åˆ™ï¼ˆä»…åŒ¹é… v å¼€å¤´çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬ tagï¼‰
tag_pattern = "v[0-9].*"
# æŒ‰æœ€æ—§åœ¨å‰æ’åº
sort_commits = "oldest"
